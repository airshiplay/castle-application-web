<!doctype html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<!--[if lte IE 9]> <html class="lte-ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Remove Tap Highlight on Windows Phone IE -->
<meta name="msapplication-tap-highlight" content="no" />

<link rel="icon" type="image/png" th:href="@{/assets/img/favicon-16x16.png}" sizes="16x16">
<link rel="icon" type="image/png" th:href="@{/assets/img/favicon-32x32.png}" sizes="32x32">

<title>login</title>

<!-- uikit -->
<link rel="stylesheet" th:href="@{/bower_components/uikit/css/uikit.almost-flat.min.css}" media="all">

<link rel="stylesheet" th:href="@{/assets/css/login_page.css}" media="all">

</head>

<body class="login_page">

	<div class="login_page_wrapper">
		<div class="md-card" id="login_card">
			<div class="md-card-content large-padding" id="login_form">
				<div class="login_heading">
					<div class="user_avatar"></div>
				</div>
				<form id="form_login" th:action="@{/login}" method="post">
					<div class="uk-form-row">
						<div class="parsley-row">
							<label for="login_username">账号<span class="req">*</span></label> <input class="md-input" type="text"
								id="login_username" name="username" required />
						</div>
					</div>
					<div class="uk-form-row">
						<div class="parsley-row">
							<label for="login_password">密码<span class="req">*</span></label> <input class="md-input" type="password"
								id="login_password" name="password" required />
						</div>
					</div>
					<div class="uk-margin-medium-top">
						<button type="submit" class="md-btn md-btn-primary md-btn-block md-btn-large">登录</button>
					</div>
					<div class="uk-grid uk-grid-width-1-3 uk-grid-small uk-margin-top">
						<div>
							<a href="#" class="md-btn md-btn-block md-btn-facebook" data-uk-tooltip="{pos:'bottom'}"
								title="Sign in with Facebook"><i class="uk-icon-facebook uk-margin-remove"></i></a>
						</div>
						<div>
							<a href="#" class="md-btn md-btn-block md-btn-twitter" data-uk-tooltip="{pos:'bottom'}"
								title="Sign in with Twitter"><i class="uk-icon-twitter uk-margin-remove"></i></a>
						</div>
						<div>
							<a href="#" class="md-btn md-btn-block md-btn-gplus" data-uk-tooltip="{pos:'bottom'}"
								title="Sign in with Google+"><i class="uk-icon-google-plus uk-margin-remove"></i></a>
						</div>
					</div>
					<div class="uk-margin-top">
						<a href="#" id="login_help_show" class="uk-float-right">需要帮助?</a> <span class="icheck-inline"> <input
							type="checkbox" name="login_page_stay_signed" id="login_page_stay_signed" data-md-icheck /> <label
							for="login_page_stay_signed" class="inline-label">保持登录</label>
						</span>
					</div>
				</form>
			</div>
			<div class="md-card-content large-padding uk-position-relative" id="login_help" style="display: none">
				<button type="button" class="uk-position-top-right uk-close uk-margin-right uk-margin-top back_to_login"></button>
				<h2 class="heading_b uk-text-success">不能登录?</h2>
				<p>这里可能让你快速的获取你的账号信息。</p>
				<p>如果你确定密码正确但不能登录，请确认大写按钮是否开启，账号是否拼写正确，然后重试。</p>
				<p>
					如果还不能解决你的问题，请<a href="#" id="password_reset_show">重置密码</a>.
				</p>
			</div>
			<div class="md-card-content large-padding" id="login_password_reset" style="display: none">
				<button type="button" class="uk-position-top-right uk-close uk-margin-right uk-margin-top back_to_login"></button>
				<h2 class="heading_a uk-margin-large-bottom">重置密码</h2>
				<form>
					<div class="uk-form-row">
						<label for="login_email_reset">你的邮箱地址</label> <input class="md-input" type="text" id="login_email_reset"
							name="login_email_reset" />
					</div>
					<div class="uk-margin-medium-top">
						<a href="index.html" class="md-btn md-btn-primary md-btn-block">发送密码到邮箱</a>
					</div>
				</form>
			</div>
			<div class="md-card-content large-padding" id="register_form" style="display: none">
				<button type="button" class="uk-position-top-right uk-close uk-margin-right uk-margin-top back_to_login"></button>
				<h2 class="heading_a uk-margin-medium-bottom">注册</h2>
				<form>
					<div class="uk-form-row">
						<label for="register_username">用户名</label> <input class="md-input" type="text" id="register_username"
							name="register_username" />
					</div>
					<div class="uk-form-row">
						<label for="register_password">密码</label> <input class="md-input" type="password" id="register_password"
							name="register_password" />
					</div>
					<div class="uk-form-row">
						<label for="register_password_repeat">重复密码</label> <input class="md-input" type="password"
							id="register_password_repeat" name="register_password_repeat" />
					</div>
					<div class="uk-form-row">
						<label for="register_email">邮箱</label> <input class="md-input" type="text" id="register_email"
							name="register_email" />
					</div>
					<div class="uk-margin-medium-top">
						<a href="index.html" class="md-btn md-btn-primary md-btn-block md-btn-large">注册</a>
					</div>
				</form>
			</div>
		</div>
		<div class="uk-margin-top uk-text-center">
			<a href="#" id="signup_form_show">注册新账号</a>
		</div>
	</div>

	<script type="text/javascript" th:inline="javascript">
		var base = /*[[${#httpServletRequest.getContextPath()}]]*/"";
	</script>

	<!-- common functions -->
	<script th:src="@{/assets/uikit/js/common.min.js}"></script>
	<!-- uikit functions -->
	<script th:src="@{/assets/uikit/js/uikit_custom.min.js}"></script>
	<!-- altair common functions/helpers -->
	<script th:src="@{/assets/uikit/js/altair_admin_common.min.js}"></script>

	<script th:src="@{/assets/js/login.min.js}"></script>

	<!-- parsley (validation) -->
	<script>
		// load parsley config (altair_admin_common.js)
		altair_forms.parsley_validation_config();
	</script>
	<script th:src="@{/bower_components/parsleyjs/dist/parsley.min.js}"></script>
	<script type="text/javascript">

		$(function() {
			// validation (parsley)
			altair_form_validation.init();
		});

		// validation (parsley)
		altair_form_validation = {
			init : function() {
				var $formLogin = $('#form_login');

				$formLogin.parsley({
					'excluded' : 'input[type=button], input[type=submit], input[type=reset], input[type=hidden], .selectize-input > input'
				}).on('form:validated', function() {
					altair_md.update_input($formLogin.find('.md-input-danger'));
				}).on('field:validated', function(parsleyField) {
					if ($(parsleyField.$element).hasClass('md-input')) {
						altair_md.update_input($(parsleyField.$element));
					}
				}).on('form:submit', function() {
					$.post($formLogin.attr('action'), $formLogin.serialize(), function(result) {
						if (result.success) {
							location.href = base + "/";
						} else {
							alert(result.msg);
						}
					}, "json");
					return false;
				});

				window.Parsley.on('field:validate', function() {
					var $server_side_error = $(this.$element).closest('.md-input-wrapper').siblings('.error_server_side');
					if ($server_side_error) {
						$server_side_error.hide();
					}
				});
			}
		};
	</script>
</body>
</html>
